apply plugin: 'groovy'
apply plugin: 'idea'
apply plugin: 'application'
apply plugin: 'maven'
apply plugin: 'java'

sourceCompatibility = 1.7
version = '1.0.0-SNAPSHOT'
group = "de.stups.slottool"

mainClassName = "Main"

repositories {
    mavenLocal()
    maven {
        name "cobra"
        url "http://cobra.cs.uni-duesseldorf.de/artifactory/repo"
    }
}

// https://simonharrer.wordpress.com/2013/09/17/building-command-line-apps-with-gradle/
run {
    if(project.hasProperty('args')){
        args project.args.split('\\s+')
    }
}
dependencies {
    compile 'org.codehaus.groovy:groovy-all:2.3.6'
    runtime  'org.codehaus.groovy:groovy-all:2.3.6'
    runtime group: 'org.xerial', name: 'sqlite-jdbc', version: '3.7.2'
    runtime group: 'commons-cli', name: 'commons-cli', version: '1.2'
    testCompile group: 'junit', name: 'junit', version: '4.11'
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.3'
}

task buildStandaloneJar(type: Jar) {
  manifest {
    attributes 'Implementation-Title': 'Model generator for timetable data',
                'Implementation-Version': version,
                'Main-Class': mainClassName
  }
  baseName = project.name + '-standalone'
  from { configurations.runtime.collect { it.isDirectory() ? it : zipTree(it) } }
  with jar
}
